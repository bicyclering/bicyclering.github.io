<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="layout," />










<meta name="description" content="Frame是布局的核心。每个开发者都使用frame定位和改变UIView和CALayer的大小。在本文中我将把焦点集中在CALayer上,因为它是UIView的底层实现,view.frame简单的返回了view.layer.frame。 Frame是布局的核心。每个开发者都使用frame定位和改变UIView和CALayer的大小。在本文中我将把焦点集中在CALayer上,因为它是UIView的底">
<meta name="keywords" content="layout">
<meta property="og:type" content="article">
<meta property="og:title" content="理解Frame">
<meta property="og:url" content="http://yoursite.com/2018/08/28/IOS/(UIViewLayout)布局/理解Frame/index.html">
<meta property="og:site_name" content="Bicyclering">
<meta property="og:description" content="Frame是布局的核心。每个开发者都使用frame定位和改变UIView和CALayer的大小。在本文中我将把焦点集中在CALayer上,因为它是UIView的底层实现,view.frame简单的返回了view.layer.frame。 Frame是布局的核心。每个开发者都使用frame定位和改变UIView和CALayer的大小。在本文中我将把焦点集中在CALayer上,因为它是UIView的底">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://yoursite.com/images/frame/bounds_origin_1.png">
<meta property="og:image" content="http://yoursite.com/images/frame/bounds_origin_2.png">
<meta property="og:image" content="http://yoursite.com/images/frame/frame和bounds区别.png">
<meta property="og:image" content="http://yoursite.com/images/frame/bounds_demo_1.png">
<meta property="og:image" content="http://yoursite.com/images/frame/bounds_demo_2.png">
<meta property="og:image" content="http://yoursite.com/images/frame/bounds使用场景_1.png">
<meta property="og:image" content="http://yoursite.com/images/frame/bouns大于frame的情况.png">
<meta property="og:image" content="http://yoursite.com/images/frame/anchorPoint_demo_1.jpeg">
<meta property="og:image" content="http://yoursite.com/images/frame/anchorPoint_demo_2.jpeg">
<meta property="og:image" content="http://yoursite.com/images/frame/anchorPoint_demo_3.jpeg">
<meta property="og:image" content="http://yoursite.com/images/frame/anchorPoint_demo_4.jpeg">
<meta property="og:image" content="http://yoursite.com/images/frame/anchorPoint_demo_5.jpeg">
<meta property="og:image" content="http://yoursite.com/images/frame/transform_demo_1.png">
<meta property="og:image" content="http://yoursite.com/images/frame/transform_计算Frame_demo1.png">
<meta property="og:image" content="http://yoursite.com/images/frame/transform_计算Frame_demo2.png">
<meta property="og:image" content="http://yoursite.com/images/frame/transform_计算Frame_demo3.png">
<meta property="og:image" content="http://yoursite.com/images/frame/transform_计算Frame_demo4.png">
<meta property="og:image" content="http://yoursite.com/images/frame/transform_计算Frame_demo5.png">
<meta property="og:updated_time" content="2021-01-12T03:56:55.340Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="理解Frame">
<meta name="twitter:description" content="Frame是布局的核心。每个开发者都使用frame定位和改变UIView和CALayer的大小。在本文中我将把焦点集中在CALayer上,因为它是UIView的底层实现,view.frame简单的返回了view.layer.frame。 Frame是布局的核心。每个开发者都使用frame定位和改变UIView和CALayer的大小。在本文中我将把焦点集中在CALayer上,因为它是UIView的底">
<meta name="twitter:image" content="http://yoursite.com/images/frame/bounds_origin_1.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2018/08/28/IOS/(UIViewLayout)布局/理解Frame/"/>





  <title>理解Frame | Bicyclering</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Bicyclering</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">要么读书,要么旅行,身体和灵魂总有一个在路上</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />
            
            公益404
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/08/28/IOS/(UIViewLayout)布局/理解Frame/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="覆雪古树">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/bicyclering.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Bicyclering">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">理解Frame</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-08-28T19:02:46+08:00">
                2018-08-28
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ios/" itemprop="url" rel="index">
                    <span itemprop="name">ios</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/08/28/IOS/(UIViewLayout)布局/理解Frame/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count gitment-comments-count" data-xid="/2018/08/28/IOS/(UIViewLayout)布局/理解Frame/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p><strong>Frame</strong>是布局的核心。每个开发者都使用frame定位和改变UIView和CALayer的大小。在本文中我将把焦点集中在CALayer上,因为它是UIView的底层实现,view.frame简单的返回了view.layer.frame。</p>
<p>Frame是布局的核心。每个开发者都使用frame定位和改变UIView和CALayer的大小。在本文中我将把焦点集中在CALayer上,因为它是UIView的底层实现,view.frame简单的返回了view.layer.frame。此外,我不会讨论setFrame:方法。虽然看起来范围十分有限,但实际上有许多有趣的事情在平凡又古老的frame getter方法中发生。</p>
<h1 id="Frame依赖于什么"><a href="#Frame依赖于什么" class="headerlink" title="Frame依赖于什么"></a>Frame依赖于什么</h1><p>众所周知,frame是一个派生属性,实际上它基于一些其他的属性。实际上在计算frame值的时候会参考4个(!)属性:bounds、anchorPoint、transform、position。</p>
<h2 id="bounds"><a href="#bounds" class="headerlink" title="bounds"></a>bounds</h2><p>bounds很棘手,它混合了层的内部和外部。bounds.size定义了层本身的面积,声明了它所存在的区域。设置masksToBounds为YES会把所有子层超出bounds范围的部分裁掉。另一方面,bounds的origin属性并不影响层本身的布局。然而它会影响它内部的子层的布局方式。bounds.origin定义了层内部坐标系的原点。</p>
<h3 id="案例1"><a href="#案例1" class="headerlink" title="案例1"></a>案例1</h3><p>这里有一个例子展示了bounds.origin如何工作。例如我们定义bounds.origin为CGPointMake(20.0f, 30.0f)</p>
<p><img src="/images/frame/bounds_origin_1.png" alt=""></p>
<p>如何定义本地坐标系?只要把层的左上角放到bounds.origin上就行了。</p>
<p><img src="/images/frame/bounds_origin_2.png" alt=""></p>
<h3 id="案例2"><a href="#案例2" class="headerlink" title="案例2"></a>案例2</h3><p><img src="/images/frame/frame和bounds区别.png" alt=""></p>
<ul>
<li><strong>frame:</strong> 该view在父view坐标系统中的位置和大小。(参照点是,父亲的坐标系统）</li>
<li><strong>bounds:</strong> 该view在本地坐标系统中的位置和大小。(参照点是,本地坐标系统,就相当于ViewB自己的坐标系统,以0,0点为起点）。</li>
</ul>
<p>其实本地坐标系统的关键就是要知道的它的原点（0,0）在父坐标系统中的什么位置（这个位置是相对于父view的本地坐标系统而言的,最终的父view就是UIWindow,它的本地坐标系统原点就是屏幕的左上角了）。</p>
<p>通过<strong>修改view的bounds</strong>属性可以修改本地坐标系统的原点位置。</p>
<p>frame我相信大家都理解的比较清楚,但是bounds光是这么说估计大家都很迷糊,那么我们下面来看具体的实例。</p>
<h3 id="bounds到底起什么作用"><a href="#bounds到底起什么作用" class="headerlink" title="bounds到底起什么作用"></a>bounds到底起什么作用</h3><h4 id="示例代码"><a href="#示例代码" class="headerlink" title="示例代码"></a>示例代码</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">UIView *view1 = [[UIView alloc] initWithFrame:CGRectMake(100, 100, 200, 200)];</span><br><span class="line">   view1.backgroundColor = [UIColor redColor];</span><br><span class="line">   [self.view addSubview:view1];//添加到self.view</span><br><span class="line">   NSLog(@&quot;view1 frame:%@========view1 bounds:%@&quot;,NSStringFromCGRect(view1.frame),NSStringFromCGRect(view1.bounds));</span><br><span class="line">   </span><br><span class="line">   UIView *view2 = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 100, 100)];</span><br><span class="line">   view2.backgroundColor = [UIColor yellowColor];</span><br><span class="line">   [view1 addSubview:view2];//添加到view1上,[此时view1坐标系左上角起点为(-20,-20)]</span><br><span class="line">   NSLog(@&quot;view2 frame:%@========view2 bounds:%@&quot;,NSStringFromCGRect(view2.frame),NSStringFromCGRect(view2.bounds));</span><br></pre></td></tr></table></figure>
<h4 id="效果图"><a href="#效果图" class="headerlink" title="效果图"></a>效果图</h4><p><img src="/images/frame/bounds_demo_1.png" alt=""></p>
<h4 id="输出日志"><a href="#输出日志" class="headerlink" title="输出日志"></a>输出日志</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">view1 frame:&#123;&#123;100, 100&#125;, &#123;200, 200&#125;&#125;========view1 bounds:&#123;&#123;0, 0&#125;, &#123;200, 200&#125;&#125;</span><br><span class="line"></span><br><span class="line">view2 frame:&#123;&#123;0, 0&#125;, &#123;100, 100&#125;&#125;========view2 bounds:&#123;&#123;0, 0&#125;, &#123;100, 100&#125;&#125;</span><br></pre></td></tr></table></figure>
<p>下面我们来改变view1的bounds,代码如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[view1 setBounds:CGRectMake(-20, -20, 200, 200)];</span><br></pre></td></tr></table></figure>
<p>此时显示和输出日志如下所示:</p>
<p><img src="/images/frame/bounds_demo_2.png" alt=""></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">view1 frame:&#123;&#123;100, 100&#125;, &#123;200, 200&#125;&#125;========view1 bounds:&#123;&#123;-20, -20&#125;, &#123;200, 200&#125;&#125;</span><br><span class="line"></span><br><span class="line">view2 frame:&#123;&#123;0, 0&#125;, &#123;100, 100&#125;&#125;========view2 bounds:&#123;&#123;0, 0&#125;, &#123;100, 100&#125;&#125;</span><br></pre></td></tr></table></figure>
<h4 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h4><p>上面设置view1的bounds的代码起到了让view2的位置改变的作用。为何（-20,-20）的偏移量,却可以让view2向右下角移动呢？</p>
<p>这是因为setBounds的作用是:强制将自己（view1）本地坐标系的原点改为（-20,-20）。这个（-20,-20）是相对view1的父view（self.view）偏移的。也就是向左上角偏移。</p>
<p>那么在view1的坐标系中（0,0）这个点是需要向右下各偏移20。</p>
<p>因为view1的subview(view2)的frame参照的坐标系是父view(view1)的bounds设置的,而此时view2的frame设置为(0,0),就会导致view2向右下各偏移20。如上图所示。</p>
<p><strong>总结:</strong></p>
<p>所以,bounds的有这么一个特点:</p>
<p>它是参考自己坐标系,它可以修改自己坐标系的原点位置,进而影响到<strong>子view</strong>的显示位置。</p>
<h3 id="bounds使用场景"><a href="#bounds使用场景" class="headerlink" title="bounds使用场景"></a>bounds使用场景</h3><p>其实bounds我们一直在使用,就是我们使用scrollview的时候。<br>为什么我们滚动scrollview可以看到超出显示屏的内容。就是因为scrollview在不断改变自己的bounds,从而改变scrollview上的子view的frame,让他们的frame始终在最顶级view(window)的frame内部,这样我们就可以始终看到内容了。</p>
<p><strong>下面通过一个具体的例子来看看:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">self.imageview = [[UIImageView alloc]initWithFrame:CGRectMake(100,0, 50, 1000)];</span><br><span class="line">   self.imageview.image = [UIImage imageNamed:@&quot;1&quot;];</span><br><span class="line">   self.imageview.contentMode = UIViewContentModeScaleAspectFill;</span><br><span class="line">   self.scrollview.contentSize = self.imageview.frame.size;</span><br><span class="line">   [self.scrollview addSubview:self.imageview];</span><br></pre></td></tr></table></figure>
<p>在向上滚动过程中,输出scrollview的frame,bouns,contentoffset和子控件imageview的frame,bounds</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-(void)scrollViewDidScroll:(UIScrollView *)scrollView&#123;</span><br><span class="line">    NSLog(@&quot;scrollview[contentoffset:%@---frame:%@------bounds:%@&quot;,NSStringFromCGPoint(scrollView.contentOffset), NSStringFromCGRect(self.scrollview.frame),NSStringFromCGRect(self.scrollview.bounds));</span><br><span class="line">    NSLog(@&quot;imageview[frame:%@------bounds:%@&quot;,NSStringFromCGRect(self.imageview.frame),NSStringFromCGRect(self.imageview.bounds));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="输出结果如下"><a href="#输出结果如下" class="headerlink" title="输出结果如下"></a>输出结果如下</h4><p><img src="/images/frame/bounds使用场景_1.png" alt=""></p>
<h4 id="分析-1"><a href="#分析-1" class="headerlink" title="分析"></a>分析</h4><p>可以看到imageview的frame和bounds还有scrollview的frame是没有改变的。唯一在不断改变的是scrollview的contentoffset和bounds,而且两者完全相同。</p>
<p>结合上面我们讲的知识,就不难理解为什么scrollview要这么做了。</p>
<p>向上滚动scrollview,我们就不断增加scrollview的bounds的y值,也就是不断把scrollview的本地坐标系原点向下偏移(相对于scrollview的父view的坐标系,y值越大,越向下偏移)。那么此时scrollview的子控件的frame设置的(0,0)就是不断向上偏移</p>
<p>假设某一时刻scrollview的坐标系原点为(0,100),那么scrollview的(0,0)位置就是相对于坐标系原点向上偏移100的距离,设置scrollview的子控件的frame为(0,0),就是设置子控件左上角在scrollview中的(0,0)位置,那么子控件就会向上偏移100,你也就看到scrollview的内容（子控件）向上滚动的效果。</p>
<p>其实我们可以使用文章开始的例子来模式UIScrollview的滚动效果,经过上面的分析我们知道就是通过不断增加UIScrollview的bounds的Y值,才可以出现滚动效果从而显示超出屏幕的内容。</p>
<p>那么使用文章开头的例子,我们可以不断增加view1的bounds的y值,来看看是不是可以达到同样的效果：view1不动,view2在不断向上滚动</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">UIView *view1 = [[UIView alloc] initWithFrame:CGRectMake(100, 200, 200, 100)];</span><br><span class="line">  view1.backgroundColor = [UIColor redColor];</span><br><span class="line">  [self.view addSubview:view1];//添加到self.view</span><br><span class="line"> </span><br><span class="line">  </span><br><span class="line">  UIView *view2 = [[UIView alloc] initWithFrame:CGRectMake(20, 0, 100, 1000)];</span><br><span class="line">  view2.backgroundColor = [UIColor yellowColor];</span><br><span class="line">  [view1 addSubview:view2];//添加到view1上,[此时view1坐标系左上角起点为(-20,-20)]</span><br><span class="line">  </span><br><span class="line">  [UIView animateWithDuration:3.0 animations:^&#123;</span><br><span class="line">      [view1 setBounds:CGRectMake(0, 1000, 200, 100)];</span><br><span class="line">  &#125;];</span><br></pre></td></tr></table></figure>
<p>运行看看,可以发现view1固定不动,view2在不断向上滚动,此时的view1就相当于UIScrollview,而view2相当于UIScrollview上面显示的内容,现在明白了吗？</p>
<h3 id="bouns大于frame的情况"><a href="#bouns大于frame的情况" class="headerlink" title="bouns大于frame的情况"></a>bouns大于frame的情况</h3><p>假设设置了控件的bounds大于frame,那么此时会导致frame被撑大,frame的x,y,width,height都会改变。</p>
<p><img src="/images/frame/bouns大于frame的情况.png" alt=""></p>
<h4 id="结论"><a href="#结论" class="headerlink" title="结论"></a>结论</h4><ul>
<li>新的frame的size等于bound的size。</li>
<li>新的frame.x = 旧frame.x - (bounds.size.witdh - 旧frame.size.width)/2</li>
<li>新的frame.y = 旧frame.y - (bounds.size.height - 旧frame.size.height)/2</li>
</ul>
<h4 id="bound的改变会累加"><a href="#bound的改变会累加" class="headerlink" title="bound的改变会累加"></a>bound的改变会累加</h4><p>假设view1上面添加了view2,view2上面添加了view3。三个view的size都是（100,100）。<br>我们设置如下:</p>
<p>view1.bound = （0,100,100,100）</p>
<p>view2.bound = （0,100,100,100)</p>
<p>那么此时view3.frame = (0,0,100,100),view3会相对于原来没有设置view1、view2的bound时的位置向上偏移200。</p>
<p><strong>总结:</strong></p>
<p>frame是参考父view的坐标系来设置自己左上角的位置。<br>设置bounds可以修改自己坐标系的原点位置,进而影响到其<strong>子view</strong>的显示位置。</p>
<h2 id="anchorPoint"><a href="#anchorPoint" class="headerlink" title="anchorPoint"></a>anchorPoint</h2><p>  之前提到过,视图的center属性和图层的position属性都指定了anchorPoint相对于父图层的位置。图层的anchorPoint通过position来控制它的frame的位置,你可以认为anchorPoint是用来移动图层的把柄。</p>
<p>  默认来说,anchorPoint位于图层的中点,所以图层的将会以这个点为中心放置。anchorPoint属性并没有被UIView接口暴露出来,这也是视图的position属性被叫做<strong>center</strong>的原因。但是图层的anchorPoint可以被移动,比如你可以把它置于图层frame的左上角,于是图层的内容将会向右下角的position方向移动(图3.3),而不是居中了。</p>
<p><img src="/images/frame/anchorPoint_demo_1.jpeg" alt=""></p>
<p><strong>图3.3 改变anchorPoint的效果</strong></p>
<p>   和第二章提到的contentsRect和contentsCenter属性类似,anchorPoint用单位坐标来描述,也就是图层的相对坐标,图层左上角是{0,0},右下角是{1,1},因此默认坐标是{0.5, 0.5}。anchorPoint可以通过指定x和y值小于0或者大于1,使它放置在图层范围之外。</p>
<p>  注意在图3.3中,当改变了anchorPoint,position属性保持固定的值并没有发生改变,但是frame却移动了。</p>
<p>  那在什么场合需要改变anchorPoint呢？既然我们可以随意改变图层位置,那改变anchorPoint不会造成困惑么？为了举例说明,我们来举一个实用的例子,创建一个模拟闹钟的项目。</p>
<p>  钟面和钟表由四张图片组成（图3.4,为了简单说明,我们还是用传统的方式来装载和加载图片,使用四个UIImageView实例（当然你也可以用正常的视图,设置他们图层的contents图片）。</p>
<p><img src="/images/frame/anchorPoint_demo_2.jpeg" alt=""></p>
<p> <strong>图3.4 组成钟面和钟表的四张图片</strong></p>
<p>   闹钟的组件通过IB来排列(图3.5),这些图片视图嵌套在一个容器视图之内,并且自动调整和自动布局都被禁用了。这是因为自动调整会影响到视图的frame,而根据图3.2的演示,当视图旋转的时候,frame是会发生改变的,这将会导致一些布局上的失灵。</p>
<p>   我们用NSTimer来更新闹钟,使用视图的transform属性来旋转钟表（如果你对这个属性不太熟悉,不要着急,我们将会在第5章“变换”当中详细说明）,具体代码见清单3.1</p>
<p> <img src="/images/frame/anchorPoint_demo_3.jpeg" alt=""></p>
<p><strong>图3.5 在Interface Builder中布局闹钟视图</strong></p>
<p><strong>清单3.1 Clock</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">@interface ViewController ()</span><br><span class="line"></span><br><span class="line">@property (nonatomic, weak) IBOutlet UIImageView *hourHand;</span><br><span class="line">@property (nonatomic, weak) IBOutlet UIImageView *minuteHand;</span><br><span class="line">@property (nonatomic, weak) IBOutlet UIImageView *secondHand;</span><br><span class="line">@property (nonatomic, weak) NSTimer *timer;</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">@implementation ViewController</span><br><span class="line"></span><br><span class="line">- (void)viewDidLoad</span><br><span class="line">&#123;</span><br><span class="line">    [super viewDidLoad];</span><br><span class="line">    //start timer</span><br><span class="line">    self.timer = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(tick) userInfo:nil repeats:YES];</span><br><span class="line">                  ￼</span><br><span class="line">    //set initial hand positions</span><br><span class="line">    [self tick];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)tick</span><br><span class="line">&#123;</span><br><span class="line">    //convert time to hours, minutes and seconds</span><br><span class="line">    NSCalendar *calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];</span><br><span class="line">    NSUInteger units = NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit;</span><br><span class="line">    NSDateComponents *components = [calendar components:units fromDate:[NSDate date]];</span><br><span class="line">    CGFloat hoursAngle = (components.hour / 12.0) * M_PI * 2.0;</span><br><span class="line">    //calculate hour hand angle //calculate minute hand angle</span><br><span class="line">    CGFloat minsAngle = (components.minute / 60.0) * M_PI * 2.0;</span><br><span class="line">    //calculate second hand angle</span><br><span class="line">    CGFloat secsAngle = (components.second / 60.0) * M_PI * 2.0;</span><br><span class="line">    //rotate hands</span><br><span class="line">    self.hourHand.transform = CGAffineTransformMakeRotation(hoursAngle);</span><br><span class="line">    self.minuteHand.transform = CGAffineTransformMakeRotation(minsAngle);</span><br><span class="line">    self.secondHand.transform = CGAffineTransformMakeRotation(secsAngle);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<p>运行项目,看起来有点奇怪(图3.6),因为钟表的图片在围绕着中心旋转,这并不是我们期待的一个支点。</p>
<p><img src="/images/frame/anchorPoint_demo_4.jpeg" alt=""></p>
<p><strong>图3.6 钟面,和不对齐的钟指针</strong></p>
<p>   你也许会认为可以在Interface Builder当中调整指针图片的位置来解决,但其实并不能达到目的,因为如果不放在钟面中间的话,同样不能正确的旋转。</p>
<p>   也许在图片末尾添加一个透明空间也是个解决方案,但这样会让图片变大,也会消耗更多的内存,这样并不优雅。</p>
<p>   更好的方案是使用anchorPoint属性,我们来在-viewDidLoad方法中添加几行代码来给每个钟指针的anchorPoint做一些平移(清单3.2),图3.7显示了正确的结果。</p>
<p>清单3.2</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">- (void)viewDidLoad </span><br><span class="line">&#123;</span><br><span class="line">    [super viewDidLoad];</span><br><span class="line">    // adjust anchor points</span><br><span class="line"></span><br><span class="line">    self.secondHand.layer.anchorPoint = CGPointMake(0.5f, 0.9f); </span><br><span class="line">    self.minuteHand.layer.anchorPoint = CGPointMake(0.5f, 0.9f); </span><br><span class="line">    self.hourHand.layer.anchorPoint = CGPointMake(0.5f, 0.9f);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    // start timer</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/images/frame/anchorPoint_demo_5.jpeg" alt=""></p>
<p><strong>图3.7 钟面,和正确对齐的钟指针</strong></p>
<h2 id="transform"><a href="#transform" class="headerlink" title="transform"></a>transform</h2><p>在一些极端情况下,使用float和double的差异是显而易见的。然而因为我们的目标是对CoreAnimation进行逆向工程并得到完全相同的结果,所以我们也使用double。我们定义一些和CoreGraphics中相同的非常简单的结构体。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">typedef struct MCSDoublePoint &#123; </span><br><span class="line">  double x, y; </span><br><span class="line">&#125; MCSDoublePoint; </span><br><span class="line">  </span><br><span class="line">typedef struct MCSDoubleSize &#123; </span><br><span class="line">  double width, height; </span><br><span class="line">&#125; MCSDoubleSize; </span><br><span class="line">  </span><br><span class="line">typedef struct MCSDoubleRect &#123; </span><br><span class="line">  MCSDoublePoint origin; </span><br><span class="line">  MCSDoubleSize size; </span><br><span class="line">&#125; MCSDoubleRect;</span><br></pre></td></tr></table></figure>
<p>值得注意的是在64位iOS设备上,我们精心构建的struct会变得多余,因为在该架构上,CGPoint,CGSize和CGRect本来就是用doubles的。</p>
<p>虽然CALayer使用的是一个完整的4×4的矩阵模拟CATransform3D,但它对计算frame的目的真的没有影响。所以,我们把焦点集中在CGAffineTransform上,它可以用每个人都喜欢的CATransform3DGetAffineTransform方法从CATransform3D中简单获得。</p>
<p>让我们从点开始,使用仿射变换来变换点是入门级的袋鼠:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">MCSDoublePoint MCSDoublePointApplyTransform(MCSDoublePoint point, CGAffineTransform t) </span><br><span class="line">&#123; </span><br><span class="line">  MCSDoublePoint p; </span><br><span class="line">  p.x = (double)t.a * point.x + (double)t.c * point.y + t.tx; </span><br><span class="line">  p.y = (double)t.b * point.x + (double)t.d * point.y + t.ty; </span><br><span class="line">  return p; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面的代码实现基于CGPointApplyAffineTransform,从根本上来讲是一个3x3的变换矩阵乘一个三维向量。</p>
<p><img src="/images/frame/transform_demo_1.png" alt=""></p>
<p>这个矩阵被CGAffineTransform的值填充,被乘的向量由点的x坐标,y坐标和1.0组成,让结果向量从矩阵中也得到转换过的元素。</p>
<p>通过点变换,我们很容易变换矩形。通过变换矩形的顶点并用直线连接它们创建一个平行四边形(通常可以是任意四边形)。但这并不是CGRectApplyAffineTransform的如何工作的。这个函数接收一个CGRect参数并返回一个CGRect。正如头文件CGAffineTransform.h中的注释声明的:</p>
<p>通常来说因为仿射变换并不保护矩形,这个函数返回一个最小的包括经过变换的rect的四个顶点的矩形。</p>
<p>读过这个以后,使用double再现CGRectApplyAffineTransform变得相对直接:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">MCSDoubleRect MCSDoubleRectApplyTransform(MCSDoubleRect rect, CGAffineTransform transform) </span><br><span class="line">&#123; </span><br><span class="line">  double xMin = rect.origin.x; </span><br><span class="line">  double xMax = rect.origin.x + rect.size.width; </span><br><span class="line">  double yMin = rect.origin.y; </span><br><span class="line">  double yMax = rect.origin.y + rect.size.height; </span><br><span class="line">  </span><br><span class="line">  MCSDoublePoint points[4] = &#123; </span><br><span class="line">    [0] = MCSDoublePointApplyTransform((MCSDoublePoint)&#123;xMin, yMin&#125;, transform), </span><br><span class="line">    [1] = MCSDoublePointApplyTransform((MCSDoublePoint)&#123;xMin, yMax&#125;, transform), </span><br><span class="line">    [2] = MCSDoublePointApplyTransform((MCSDoublePoint)&#123;xMax, yMin&#125;, transform), </span><br><span class="line">    [3] = MCSDoublePointApplyTransform((MCSDoublePoint)&#123;xMax, yMax&#125;, transform), </span><br><span class="line">  &#125;; </span><br><span class="line">  </span><br><span class="line">  double newXMin =  INFINITY; </span><br><span class="line">  double newXMax = -INFINITY; </span><br><span class="line">  double newYMin =  INFINITY; </span><br><span class="line">  double newYMax = -INFINITY; </span><br><span class="line">  </span><br><span class="line">  for (int i = 0; i &lt; 4; i++) &#123; </span><br><span class="line">    newXMax = MAX(newXMax, points[i].x); </span><br><span class="line">    newYMax = MAX(newYMax, points[i].y); </span><br><span class="line">    newXMin = MIN(newXMin, points[i].x); </span><br><span class="line">    newYMin = MIN(newYMin, points[i].y); </span><br><span class="line">  &#125; </span><br><span class="line">  </span><br><span class="line">  MCSDoubleRect result = &#123;newXMin, newYMin, newXMax - newXMin, newYMax - newYMin&#125;; </span><br><span class="line">  </span><br><span class="line">  return result; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们计算了四个顶点的坐标,变换它们并且得到x和y的极值。</p>
<h3 id="计算Frame"><a href="#计算Frame" class="headerlink" title="计算Frame"></a>计算Frame</h3><p>我们付出努力去理解我们关心的每一件事,现在,获得frame会是很热闹:</p>
<p>定义一个面积为bounds.size的矩形</p>
<p><img src="/images/frame/transform_计算Frame_demo1.png" alt=""></p>
<p>计算该矩形内的anchorPoint位置</p>
<p><img src="/images/frame/transform_计算Frame_demo2.png" alt=""></p>
<p>将矩形放入坐标系内,anchorPoint作为坐标系的原点</p>
<p><img src="/images/frame/transform_计算Frame_demo3.png" alt=""></p>
<p>应用任何你实施的变换,保持一个<strong>包含了经过转换的顶点的最小矩形</strong></p>
<p><img src="/images/frame/transform_计算Frame_demo4.png" alt=""></p>
<p>根据position移动anchorPoint</p>
<p><img src="/images/frame/transform_计算Frame_demo5.png" alt=""></p>
<p>灰色的就是结果矩形</p>
<p>实现这些操作的代码如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">- (CGRect)frameWithBounds:(CGRect)bounds anchorPoint:(CGPoint)anchorPoint transform:(CATransform3D)transform position:(CGPoint)position </span><br><span class="line">&#123; </span><br><span class="line">  MCSDoubleRect rect; </span><br><span class="line">  </span><br><span class="line">  rect.size.width = bounds.size.width; </span><br><span class="line">  rect.size.height = bounds.size.height; </span><br><span class="line">  rect.origin.x = (double)-bounds.size.width * anchorPoint.x; </span><br><span class="line">  rect.origin.y = (double)-bounds.size.height * anchorPoint.y; </span><br><span class="line">  </span><br><span class="line">  rect = MCSDoubleRectApplyTransform(rect, CATransform3DGetAffineTransform(transform)); </span><br><span class="line">  </span><br><span class="line">  rect.origin.x += position.x; </span><br><span class="line">  rect.origin.y += position.y; </span><br><span class="line">  </span><br><span class="line">  return CGRectMake(rect.origin.x, rect.origin.y, rect.size.width, rect.size.height); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="position"><a href="#position" class="headerlink" title="position"></a>position</h2><p>在layer体系结构中,layer需要添加在supLayer中,才可以显示出来(和view体系结构相似)。因此,每一个显示出来的layer都有一个supLayer。</p>
<p>position是layer中的anchorPoint点在superLayer中的位置坐标.</p>
<h2 id="anchorPoint、position、frame之间的相对关系"><a href="#anchorPoint、position、frame之间的相对关系" class="headerlink" title="anchorPoint、position、frame之间的相对关系"></a>anchorPoint、position、frame之间的相对关系</h2><p>首先弄清楚这三个属性表示什么. 回顾一下上面讲的.</p>
<ul>
<li>frame中的X,Y表示sublayer左上角相对于supLayer的左上角的距离</li>
<li>position中的X,Y表示sublay锚点相对于supLayer的左上角的距离</li>
<li>anchorPoint中的X,Y表示锚点的x,y的相对距离比例值</li>
</ul>
<p><strong>当确定锚点,改变frame时, position的值为:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">position.x = frame.origin.x + anchorPoint.x * bounds.size.width</span><br><span class="line">position.y = frame.origin.y + anchorPoint.y * bounds.size.height</span><br></pre></td></tr></table></figure>
<p><strong>确定锚点,改变position时,frame的值为:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">frame.origin.x = position.x - anchorPoint.x * bounds.size.width  </span><br><span class="line">frame.origin.y = position.y - anchorPoint.y * bounds.size.height</span><br></pre></td></tr></table></figure>
<p><strong>改变锚点,frame的值变化为:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">	frame.origin.x = - anchorPoint.x * bounds.size.width + position.x；  </span><br><span class="line">frame.origin.y = - anchorPoint.y * bounds.size.height + position.y；</span><br></pre></td></tr></table></figure>
<p><strong>影响关系:</strong></p>
<ul>
<li>锚点改变,position不影响,frame变化</li>
<li>frame变化,锚点不影响,position变化</li>
<li>position变化,锚点不影响,frame变化</li>
</ul>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/layout/" rel="tag"># layout</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/08/18/English/Let'sGo/T/Salon(沙龙)/english-thlds09-my-favourites/" rel="next" title="My favourites">
                <i class="fa fa-chevron-left"></i> My favourites
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/09/28/Nutrition/Breakfast/nutrition-breakfast-monday/" rel="prev" title="营养从早餐开始">
                营养从早餐开始 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
      
        <div id="gitment-container"></div>
      
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/bicyclering.jpg"
                alt="覆雪古树" />
            
              <p class="site-author-name" itemprop="name">覆雪古树</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">137</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">5</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">27</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/bicyclering/" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-globe"></i>GitHub</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Frame依赖于什么"><span class="nav-number">1.</span> <span class="nav-text">Frame依赖于什么</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#bounds"><span class="nav-number">1.1.</span> <span class="nav-text">bounds</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#案例1"><span class="nav-number">1.1.1.</span> <span class="nav-text">案例1</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#案例2"><span class="nav-number">1.1.2.</span> <span class="nav-text">案例2</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#bounds到底起什么作用"><span class="nav-number">1.1.3.</span> <span class="nav-text">bounds到底起什么作用</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#示例代码"><span class="nav-number">1.1.3.1.</span> <span class="nav-text">示例代码</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#效果图"><span class="nav-number">1.1.3.2.</span> <span class="nav-text">效果图</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#输出日志"><span class="nav-number">1.1.3.3.</span> <span class="nav-text">输出日志</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#分析"><span class="nav-number">1.1.3.4.</span> <span class="nav-text">分析</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#bounds使用场景"><span class="nav-number">1.1.4.</span> <span class="nav-text">bounds使用场景</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#输出结果如下"><span class="nav-number">1.1.4.1.</span> <span class="nav-text">输出结果如下</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#分析-1"><span class="nav-number">1.1.4.2.</span> <span class="nav-text">分析</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#bouns大于frame的情况"><span class="nav-number">1.1.5.</span> <span class="nav-text">bouns大于frame的情况</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#结论"><span class="nav-number">1.1.5.1.</span> <span class="nav-text">结论</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#bound的改变会累加"><span class="nav-number">1.1.5.2.</span> <span class="nav-text">bound的改变会累加</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#anchorPoint"><span class="nav-number">1.2.</span> <span class="nav-text">anchorPoint</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#transform"><span class="nav-number">1.3.</span> <span class="nav-text">transform</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#计算Frame"><span class="nav-number">1.3.1.</span> <span class="nav-text">计算Frame</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#position"><span class="nav-number">1.4.</span> <span class="nav-text">position</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#anchorPoint、position、frame之间的相对关系"><span class="nav-number">1.5.</span> <span class="nav-text">anchorPoint、position、frame之间的相对关系</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">覆雪古树</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  







<!-- LOCAL: You can save these files to your site and update links -->
    
        
        <link rel="stylesheet" href="https://aimingoo.github.io/gitmint/style/default.css">
        <script src="https://aimingoo.github.io/gitmint/dist/gitmint.browser.js"></script>
    
<!-- END LOCAL -->

    

    
      <script type="text/javascript">
      function renderGitment(){
        var gitment = new Gitmint({
            id: '1535454166000', 
            owner: 'bicyclering',
            repo: 'bicyclering.github.io',
            
            lang: "" || navigator.language || navigator.systemLanguage || navigator.userLanguage,
            
            oauth: {
            
            
                client_secret: '182b21f290f00470ce262e9b8337488251f877f0',
            
                client_id: 'a20e7fe4e3bc17dde8b6'
            }});
        gitment.render('gitment-container');
      }

      
      renderGitment();
      
      </script>
    







  





  

  

  
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>


  
  

  

  

  

</body>
</html>
